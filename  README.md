## Реализация системы аутентификации и авторизации с ролевой моделью доступа (RBAC).

### 1. Взаимодействие с пользователем
*Регистрация* - ввод имени, фамилии, отчества, email, пароля, повтор пароля

*Обновление информации* - пользователь может редактировать свой профиль с проверкой пароля

*Удаление пользователя* (мягкое) - установка is_active=False, logout, запрет логина

*Login* - вход по email и паролю с выдачей JWT токена

*Logout* - выход из системы с инвалидацией токена через blacklist

*Идентификация пользователя* - через JWT токен

### 2. Система разграничения прав доступа
#### Архитектура RBAC (Role-Based Access Control):

**Схема БД**:
python
User → UserRole → Role

#### Таблицы:
*users* - пользователи (id, username, name, surname, patronymic, email, password, is_active)

*roles* - роли (admin, user)

*user_roles* - связь пользователей с ролями

*articles* - бизнес-объекты с авторами

*blacklisted_tokens* - невалидные JWT токены

#### Права доступа:
*Пользователь (user)* - чтение/создание статей, редактирование своих статей и профиля, удаление своего профиля

*Администратор (admin)* - полный доступ ко всем ресурсам, управление пользователями (изменение ролей, 
активация удаленных пользователей)

#### Ошибки доступа:
**401 Unauthorized** - неавторизованный доступ

**403 Forbidden** - недостаточно прав

#### Админское API:
Просмотр всех пользователей

Изменение ролей пользователей

Восстановление удаленных аккаунтов

### 3. Вымышленные объекты бизнес-приложения
Статьи (Articles) - система управления контентом:

Пользователи создают и управляют своими статьями

Администраторы могут управлять всеми статьями

Реализованы операции с проверкой прав доступа

## Быстрый старт
Предварительные требования
Docker и Docker Compose

Или Python 3.11+ и PostgreSQL 15+

## Клонируйте репозиторий
##### git clone https://github.com/Lavandazz/ApiProject.git
##### cd ApiProject

## Запустите приложение
##### docker-compose up --build
или
##### docker-compose build
##### docker-compose up

### Приложение будет доступно по адресу:
#### Для docker запуска: 
http://localhost:8000
#### Документация API: 
http://localhost:8000/docs

## Локальный запуск (без Docker)

### Установите зависимости
pip install -r requirements.txt
### Создайте .env файл
Пример .env файла в .env.example
### # Запустите приложение
uvicorn main:app --host 0.0.0.0 --port 8000 --reload

#### Для локального запуска :
http://127.0.0.1:8000
#### Документация API: 
http://127.0.0.1:8000/docs

### Тестовые пользователи:

После запуска автоматически создаются следующие пользователи:

| Роль | Username | Email | Пароль | Права |
|------|----------|-------|--------|-------|
| **Admin** | `skynet_admin` | `admin@skynet.com` | `judgment_day` | Полный доступ |
| User | `john_connor` | `john@resistance.com` | `future_savior2024` | Базовые функции |
| User | `sarah_connor` | `sarah@fightskynet.com` | `terminator_hunter` | Базовые функции |
| User | `t800_model101` | `t800@cyberdyne.com` | `ill_be_back` | Базовые функции |
| User | `kyle_rees` | `kyle@future.com` | `ilovejohn1984` | Базовые функции |
| User | `t1000` | `t1000@skynet.com` | `mimetic_polyalloy` | Базовые функции |

### Для тестирования рекомендуется использовать:
- **Администратор:** `admin@skynet.com` / `judgment_day`
- **Обычный пользователь:** `john@resistance.com` / `future_savior2024`
